I"a“<p>Originally posted on <a href="www.letsmakerobots.com">www.letsmakerobots.com</a></p>

<p>I‚Äôm posting this collection out of frustration and perhaps defeat. I‚Äôve been working on several projectss for the last two months, trying to finish something. I‚Äôd gotten addicted to that ‚ÄúIt works!‚Äù moment I think anyone gets when they see a LED blink. Sadly, I feel I‚Äôve failed at most of these projectss.</p>

<p>The second reason I post is posterity.</p>

<p>I‚Äôve grown to appreciate failure, given how much I learn from it. Of course, I‚Äôd much rather learn from <em>other‚Äôs</em> failures. So, I figure I‚Äôd try to write up all my blunders for others.</p>

<p>The last reason is tactical humility.</p>

<p>I figure I might be able to finish some of these projectss if someone tells me what the hell I‚Äôm doing wrong (though, it might take less time if someone tells me what‚Äôs right).</p>

<p>Alright, enough self-loathing and belaboring.</p>

<p><strong>Contents:</strong></p>

<ol>
  <li><strong>Arduino heart rate sensor.</strong></li>
  <li><strong>Bluetooth 4.0</strong></li>
  <li><strong>Heatsinking a high-power LED</strong></li>
  <li><strong>XL4432 ‚Äì long-range RF</strong></li>
  <li><strong>SMD version of Atmega Fuse Doctor</strong></li>
  <li><strong>Arduino Thermostat</strong></li>
  <li><strong>Raspberry Pi and Remote Compiling</strong></li>
</ol>

<p><strong>Pulse Sensor Re-Creation ‚Äì A Story of Heartbreak:</strong></p>

<p><strong>Pulse Sensor Attempt 1:</strong></p>

<p><img src="../images/PulseSensor_1.jpg" alt="" />For a awhile now I‚Äôve been interested biometrics. I figure if my wife ever finishes graduate school and becomes my sugar-momma, then, I‚Äôll pursue my pin-headed dope in Experimental Psychology. Developing my own sensors, or at least having an intimate knowledge of how they work would probably help me getting into a program (damn education inflation). So, I‚Äôve been watching out for open-hardware sensors for a bit, and it seems these <a href="http://pulsesensor.com/open-hardware/"><strong>guys</strong></a>‚Äô pulse-sensor was ever increasing in popularity.</p>

<p>As always, I still believe the best way for a dumb-guy like myself to learn smart stuff, is by taking apart stuff the real smart-people make.  But being a non-conformist, I avoided trying to re-make their sensor. Still, after viewing other schematics I found (<a href="http://embedded-lab.com/blog/?p=7336"><strong>1</strong></a>, <a href="http://www.seeedstudio.com/wiki/Grove_-_Heart_rate_ear_clip_kit"><strong>2</strong></a>, <a href="http://www.youtube.com/watch?v=qNBTlvJr8vE"><strong>3</strong></a>, <a href="http://www.radiolocman.com/shem/schematics.html?di=144220"><strong>4</strong></a>, <a href="http://www.jamesrosko.com/2012/01/arduino-pulse-monitor.html"><strong>5</strong></a>), I decided I‚Äôd be such a non-conformist I‚Äôd conform and go with the popular sensor.</p>

<p>After a glance, it seemed great; a small lightweight heart-rate monitor that was Arduino compatible. Then, I noticed the <a href="http://pulse-sensor.googlecode.com/files/PulseSensorAmpedHardware.zip"><strong>design files</strong></a> were put together in <a href="http://www.designspark.com/"><strong>Design Spark</strong></a>. ‚ÄúNo problem, I thought, I‚Äôll just export them over to Eagle, then I can play with the PCB layout, maybe switch those 0603s to 0805s and send it off to OSHPark.‚Äù</p>

<p>Come to find out there is no easy way to export Eagle files from Design Spark.</p>

<p>New plan, I‚Äôll just follow the Pulse-Sensor <a href="http://pulse-sensor.googlecode.com/files/PulseSensorAmpd%20-%20Schematic.pdf"><strong>schematic</strong> </a>and re-create the entire board in Eagle (all half inch of it). And that‚Äôs what I did. I‚Äôd post those Eagle files, but, they suck and don‚Äôt work. I had made several major mistakes.</p>

<p><img src="../images/Pulse_Sensor_1_--_Top.jpg" alt="" /><img src="../images/Pulse_Sensor_1_--_Bottom.jpg" alt="" />To begin, I had to create several Eagle components for the board. The op-amp, LED, and light-sensor. Respectively, <a href="http://ww1.microchip.com/downloads/en/DeviceDoc/21733j.pdf"><strong>MCP6001</strong></a>, <a href="http://pulsesensor.myshopify.com/pages/open-hardware"><strong>AM2520ZGC09</strong></a>, and <a href="http://www.avagotech.com/docs/AV02-1169EN"><strong>APDS-9008</strong></a>. None were a real threat. I made each part according to the datasheets. Then, I strung together the schematic in Eagle, switched to the PCB layout, and threw my pieces down. But for some reason I thought, ‚ÄúI should replace the 0603 passives on this board with 0402s.‚Äù</p>

<p>I figured, if I could shrink the board even more I‚Äôd be happier, right? I mean, smaller is better‚Äìso the women say. Well, it was the only thing on this board version I didn‚Äôt regret.</p>

<p>In the end, the board was sent off to OshPark for a $2.00.</p>

<p>When the post came, as my friends across the lake say, I was excited about the itty-bitty board. Unfortunately, I started my string of disappointments after I populated the board.</p>

<p><span style="mso-no-proof: yes;"><img src="../images/IMG_0569.jpg" alt="" />Like I said, I didn‚Äôt regret the 0402s at all. They all soldered on pretty easy. Though, I think my primary beef with 0402s over 0802 is when it comes to tweezerless soldering. See, when I go to solder 0802s I have this process of tapping one pad with a bit of solder, and taking a resistor for example, hold the 0802‚Äôs body with tweezers in my left hand while my right hand keeps the solder warm. Then, I simply run one end of the resistor into the pool of solder, move the iron away, then, when the solder cools, let go with the tweezers. To get the other end, I‚Äôll put the tweezers down and simply tap the other end with solder. <em>Voila</em>.</span></p>

<p>I‚Äôd try to get a picture of this process, but, I don‚Äôt have a third hand yet. Though,<a href="http://www.kickstarter.com/projectss/antonyevans/glowing-plants-natural-lighting-with-no-electricit"> <strong>these folk</strong> </a>are working on it.</p>

<p>This doesn‚Äôt work with 0402s. One, holding the body of a 0402 with tweezers is like a giant trying to tight-rope-walk a piece of dental-floss. But the problem really begins in the second step, when I set the tweezers down to tap the other end, the heat from my iron shots through the little 0402 to the other end, loosening the hardened side, as soon as this happens, the entire 0402 stands on end, hugging my iron. Of course, this ends with me quickly pulling the little guy off with my fingers (not smart, but each 0402 is like $.20).</p>

<p><img src="../images/IMG_8776.jpg" alt="" />A few notes:</p>

<p><strong>The LED fit through the hole in the PCB, but I was worried the drill wouldn‚Äôt be wide enough (I guessed a bit).</strong></p>

<p><strong>OSHPark takes non-squarish shapes, though, they charge you as if it were square.</strong></p>

<p><strong>Open-source hardware is not the same as Open-Source (but lacking some key pieces of information) Hardware. I believe the Pulse Sensor is the latter.</strong></p>

<p><strong>The only piece that couldn‚Äôt be soldered with a solder-iron was the light-sensor. All of it‚Äôs pads are tucked under the actual component. So, I used the good ole‚Äô overturned clothes-iron.</strong></p>

<p><img src="../images/IMG_0673.jpg" alt="" />Anyways, once I had all the components in place? I threw on a few wires, attached it to the Arduino, uploaded the sketch, turned it on. <em>And</em>‚Ä¶<strong>smoke.</strong></p>

<p><strong>Waah-waaah.</strong></p>

<p>I‚Äôd like to tell you this story has a good end. But, like the title suggests, it‚Äôs an incomplete work.</p>

<p>I started trouble shooting the board: I checked the wiring, the schematic, the Eagle components I made. I tried 3.3v, different sketches, touching the sensor, not touching the sensor, praying to Cthullu. Nothing. Just pretty smoke.</p>

<p>Finally, I gave up.</p>

<p>(Well, as much as I ever give-up on anything. Stupid obsessive nature.)</p>

<hr />

<p><strong>Pulse Sensor Attempt 2:</strong></p>

<p>Well, weeks passed and I was working on other projectss, but the little pulse-sensor board kept begging for another chance.</p>

<p>I decided to try again. I‚Äôd have no more trying to ignorantly trouble-shoot the thumbnail sized board, so I went back to the designers‚Äô original files, downloaded DesignSpark, and pulled up the schematic and board. After briefly examining them I began to realize I was a little off on the board layout. Then it hit me, I could always copy the design manually, it shouldn‚Äôt take long since I had the schematic already together and the components made.</p>

<p>Well, below is <strong>a video of that process</strong>:</p>

<div class="flex-video">
  <iframe width="560" height="315" src="https://www.youtube.com/embed/hZI9QOGVHNM" frameborder="0" allowfullscreen=""></iframe>
</div>

<p>After I caught the two errors (wrong MCP6001 and disorientation of the APDS-9008) I felt a little better sending it to OSHPark again. Two dollars later I wasn‚Äôt as sure, but the boards were on their way regardless. While I waited, I jumped on Texas Instrument‚Äôs website and ordered samples of (what I hoped was) the correct op-amp.</p>

<p>When the boards came in I did something frugal that made me kick myself later: I pulled the components off the old board to put on the new board. It sounded like a great financial strategy at the time, but added more work when <strong>I realized my new little board still didn‚Äôt work</strong>. Now, I had to question whether it was the components, the board, or I also ran into this <a href="http://makezine.com/2012/02/17/reel-crime-the-pulse-sensor-counterfeit-leds-story/"><strong>article</strong> </a>that scared the crap outta me. Although, it gave me a lot of respect for those guys. Re-soldering 2,000 SMD leds in a night was no small task. And perhaps it welled slight guilt in me since I was working hard to circumvent their <em>more</em> than deserved profit off their $25 <a href="http://pulsesensor.myshopify.com/products/pulse-sensor-amped"><strong>sensor</strong></a>.</p>

<p>That‚Äôs pretty much it: So far. I‚Äôve not had the time to give her another go, but I will. The next round I‚Äôll actually create breakout boards for the main components to make sure my soldering is not the problem. I‚Äôm really only concerned with the light sensor, since the pads are practically DFN (no exposed legs). But I hope to have this tied up in the next week to month.</p>

<ol>
  <li>
    <p><strong>.29</strong>  (<a href="http://www.digikey.com/product-detail/en/MCP6001T-I%2FOT/MCP6001T-I%2FOTCT-ND/697158"><strong>Digi-Key</strong></a>)</p>
  </li>
  <li>
    <p>Light Photo Sensor: <strong>1.23 (<a href="http://www.digikey.com/product-detail/en/APDS-9008-020/516-2662-1-ND/3909167">Digi-Key</a>)</strong></p>
  </li>
  <li>
    <p>LED:  <strong>.79   (<a href="http://www.digikey.com/product-detail/en/AM2520ZGC09/754-1423-1-ND/2163781">Digi-Key</a>)</strong></p>
  </li>
  <li>
    <p>0603 Schottky Diode<strong>: .50 (<a href="http://www.digikey.com/product-detail/en/CD0603-B0130L/CD0603-B0130LCT-ND/3438043?WT.mc_id=PLA_3438043">Digi-Key</a>)</strong></p>
  </li>
  <li>
    <p>Passives:  ~<strong>2.50</strong> <strong>- Resistors: 1 x 470k, 1 x 12k, 2 x 100k, 1 x 10k, 1 x 3.3Meg - Capacitors: 3 x 4.7uF, 2 x 2.2uF</strong></p>
  </li>
  <li>
    <p>OSHPark Boards<strong>:</strong> $<strong>.67</strong> (minimum 3 boards, costing $2.00. 3/2.00 = ~.67)</p>
  </li>
</ol>

<p><strong>Total (approximate): $ 5.98</strong></p>

<hr />

<p><strong>HM-10 ‚Äì Bluetooth 4.0 Module ‚Äì The story of a Broken Breakout</strong></p>

<p><strong>UPDATE (8-3-13)</strong></p>

<p><strong>I‚Äôve corrected the problem; yes, it was the ground plane under the antenna.</strong></p>

<p><strong><a href="http://letsmakerobots.com/node/38009">Here is an updated build.</a></strong></p>

<p>If anyone knows me, they know I‚Äôm cheap. But I prefer to think of myself as ‚Äúresource efficient.‚Äù This has led me to do a bit of shopping at <a href="http://www.fasttech.com/"><strong>FastTech</strong></a>. Their stuff isn‚Äôt as cheap as the eBay, but pretty damn close.</p>

<p>Well, that‚Äôs a prelude to this story. Awhile back a co-worker‚Äôs head-phone jack on his phone broke.  He said, ‚ÄúDon‚Äôt you fiddle with that stuff? You should just make me a Bluetooth headset.‚Äù Externally: Joke-deflected. Internally: Challenge-accepted.</p>

<p>I started looking through different Bluetooth ICs. I mean, why buy <a href="http://www.fasttech.com/products/0/10001666/1121601-stylish-compact-sx-910a-sporty-bluetooth-stereo-ha"><strong>Bluetooth ear-phones</strong></a> for under $20 when you could make a set for twice that? Especially, when only takes around a 100 hours of ‚Äúfiddling‚Äù time? Americans are so lazy.</p>

<p>Well, the first IC I landed was this guy: <a href="http://www.ti.com/lit/ds/symlink/lmx9838.pdf"><strong>LMX9838</strong></a>. And it wasn‚Äôt until I had finished the Eagle part, designed the schematic, and was working on the board did I look at how much it <a href="http://www.digikey.com/product-detail/en/LMX9838SB%2FNOPB/LMX9838SB%2FNOPB-ND/1730309"><strong>retailed</strong> </a>for. Well, I wasn‚Äôt going to order samples every time I wanted to embed Bluetooth in my projects, besides, isn‚Äôt Bluetooth 2.0 power hungry?</p>

<p>Well, back to looking through ICs.</p>

<p>And on the second browsing I ran across Texas Instrument‚Äôs new <a href="http://www.ti.com/lit/ds/symlink/cc2500.pdf"><strong>CC2500</strong> </a>series. Righteous.</p>

<p>I saw the possibility of making a Bluetooth 4.0 device with this little chip <a href="http://www.ti.com/lit/ds/symlink/cc2540.pdf"><strong>CC2540</strong></a><span style="font-size: small;">. It‚Äôs a SoC (system-on-chip) with Bluetooth 4.0 capability. Again, righteous.</span></p>

<p>I ordered several samples of the chip from TI. While I waited on the post I began wading through all the terms: BLE, BT 4.0, Smart Energy, etc. I searched to see if anyone else had already created the schematic, PCB, and firmware that would be needed to drive these little guys. Here are a few discoveries I made.</p>

<p><strong>Hardware:</strong></p>

<p><img src="../images/500px-CC2541_Breakout_Board.jpg" alt="" />Here‚Äôs a <a href="http://processors.wiki.ti.com/index.php/CC2541_Breakout_Board"><strong>complete PCB</strong></a> for the <a href="http://www.ti.com/lit/ds/symlink/cc2541.pdf"><strong>CC2541</strong></a>, which seems to be optimized for low-power consumption. I will say, the entire chip is pretty well documented on the TI forums, but overall, the hardware aspects are the least.</p>

<p>I downloaded the Eagle files and began ripping off all the unnecessary circuits. (I think there is a lipo charger circuit?) The goal was to bring the board size small enough it would be cheap to print.</p>

<p>But as I got to ripping pieces of close to the antennae noticed how easily it would be to screw the whole thing up. And since I hadn‚Äôt built my <a href="http://scottyspectrumanalyzer.com/"><strong>spectrum analyzer</strong> </a>yet, I would be stabbing in the dark each time ordered a version of the board.</p>

<p><img src="../images/cc2541_Breakout_PCB.jpg" alt="" />This realization on top of all the 0402s and the DFN package, well, I decided I wanted to play with the chip on a completed board, with already installed firmware before I sunk time into a personal development (fancy words for: <strong>I got lazy</strong>).</p>

<p>I won‚Äôt cover the firmware or software, since I took another route and didn‚Äôt thoroughly Google-search them. But do know, within the collective in the Texas Instrument‚Äôs cc2500 forums there is almost everything you‚Äôd want. Although, be prepared, if you desire to create your own firmware you‚Äôll need to brush up on your C and AVR programming.</p>

<p>This brings me back to Fasttech.</p>

<p>I noticed one day they had these <a href="http://www.fasttech.com/products/0/10004051/1292002-ti-cc2540-bluetooth-40-ble-2540-transparent-serial"><strong>HM-10s</strong></a> on sale. <strong>Waahoo!</strong> A pre-designed CC2540 board with firmware already created? Firmware that is AT commandable? I bought two.</p>

<p>I figure I could at least get a feel for the chip and see if it was something I really wanted to sink time into developing.</p>

<p>Well, a week later I got these little guys.</p>

<p><img src="../images/HM-10-2.jpg" alt="" />They aren‚Äôt bad little boards. But, they were little. I tried soldering on jumpers to the ant sized grooves, it didn‚Äôt go well. I knew to really start playing with the board I needed a breakout.</p>

<p>So I made one:</p>

<p><strong><a href="http://www.ubermentis.com/files/HM-10%20Breakout%20v.9.rar">HM-10 Breakout v.9</a> (don‚Äôt use, sucks)</strong></p>

<p>When the breakout boards came in I was surprised they worked (I‚Äôm usually surprised when something I make turns out :).</p>

<p>They straddled my breadboard nicely. <span style="mso-no-proof: yes;"> And it allowed me to play with all the bits of the board I wanted: V, GND, Rx, Tx, and PIO1 (pin for connection-status LED).</span></p>

<p><img src="../images/IMG_0666.jpg" alt="" />Since the little HM-10 operated on 3.3v I carefulIy put it in the breadboard and pulled out my <a href="https://www.sparkfun.com/products/10275"><strong>Sparkfun Lilypad FTDI</strong></a> (first huge mistake) to interface with the board‚Äôs serial.</p>

<p>Well, I couldn‚Äôt figure out what was wrong; the board would not respond to AT commands (I was using <a href="http://realterm.sourceforge.net/"><strong>Realterm</strong></a>). I mean, I had plugged the 3.3v into the HM-10‚Äôs power, so I know it wasn‚Äôt getting too much voltage. I even checked it with a multi-meter (about a hundred times).</p>

<p>Well, as those of you who are smarter than me (so all of you?) probably already know: The Sparkfun‚Äôs Lilypad FTDI is designed to provide the Lilypad with 3.3v, but the Atmega-328-P on the Lilypad is actually 5v tolerant. So why drop the voltage on the Rx and Tx lines? Of course, this wasn‚Äôt a conclusion I came to for many hours, really, until I started randomly probing the boards with the multi-meter.</p>

<p><strong>Damnit.</strong></p>

<p>Well, there goes $13.98 (yes, I was slow enough to kill both boards).</p>

<p>Discouraged, I ordered two more boards.</p>

<p>You see, when it comes to electronics my driving code is‚Ä¶well, <a href="http://www.youtube.com/watch?v=nU2y6ztlMAQ"><strong>this guy explains it better</strong></a>.</p>

<p>I also bought real <a href="http://www.ebay.com/itm/400405460289?ssPageName=STRK:MEWNX:IT&amp;_trksid=p3984.m1439.l2649"><strong>FTDI breakout</strong></a> and a <a href="http://www.ebay.com/itm/261145190601?ssPageName=STRK:MEWNX:IT&amp;_trksid=p3984.m1439.l2649"><strong>logic-level converter</strong></a>. I was tired of frying things.</p>

<p>When everything came in, I took the broken boards off by heating the bottom of the breakout with a heat-gun until the HM-10 was loose. I cleaned the top of the breakout boards with some solder wick. Then, soldered the new HM-10s on.</p>

<p><strong>Video of Soldering the HM-10 to Breakout</strong></p>

<div class="flex-video">
  <iframe width="560" height="315" src="https://www.youtube.com/embed/BOT7Vx9lAlk" frameborder="0" allowfullscreen=""></iframe>
</div>

<p>I wired the whole mess up on a breadboard and was surprised when I actually got a response in Realterm.</p>

<p>AT</p>

<p>AT+OK</p>

<p>**Victory! **(hey, I‚Äôve learned to enjoy even small triumphs)</p>

<p>I had to use specific settings in Realterm to successfully communicate with the HM-10</p>

<p>Under the ‚ÄúPort‚Äù tab</p>

<ul>
  <li>Buad: 9600</li>
  <li>Parity: None</li>
  <li>Data Bits: 8</li>
  <li>Stop Bits: 1</li>
  <li>Hardware Flow Control: RTS/CTS</li>
  <li>Software Flow Control: Receive‚ÄìYes, Transmit‚ÄìYes</li>
</ul>

<p>Under the ‚ÄúEcho Port‚Äù tab</p>

<ul>
  <li><span style="font-family: Arial; font-size: small;">Echo On: Yes</span></li>
  <li><span style="font-family: Arial; font-size: small;">Monitor: Yes</span></li>
</ul>

<p>Then, under the ‚ÄúSend‚Äù tab typed in my AT commands and hit ‚ÄúSend ASCII‚Äù:</p>

<p>This worked pretty well. Every time I typed ‚ÄúAT‚Äù it shot back, ‚ÄúAT+OK‚Äù</p>

<p>So, I started digging for the rest of the AT commands. And dig I did.</p>

<p>Apparently the HM-10 is developed by <a href="http://www.jnhuamao.cn/"><strong>www.jnhuamao.cn</strong></a>. These folk are somewhere over in Jinan‚Äôs <a href="http://rightsite.asia/en/industrial-zone/jinan-hi-tech-industrial-development-zone"><strong>Hi-tech Development Zone</strong></a>. Anyways, luckily we have GoogleTranslate and I was able to get through several of their current documents. But not before I lost a time on trying to get the module to respond to AT commands no longer supported (like the connection command).</p>

<p>Eventually, I found the current English manual</p>

<p><a href="http://www.ubermentis.com/files/HM-10_English.pdf"><strong>HM-10 Manual</strong></a></p>

<p><img src="../images/IMG_8991_2.jpg" alt="" />The manual answered a lot of my questions. It came with a complete pinout (even a schematic!). After playing with the commands I was re-naming the module, resetting it and running many other needed commands.</p>

<p>Now for a live test.</p>

<p>I got my work phone, iPhone 4S, which is equipped with Bluetooth 4.0. I tried using the stock Bluetooth connection found under settings and it couldn‚Äôt find my little HM-10. I switched to <a href="https://itunes.apple.com/us/app/lightblue-bluetooth-low-energy/id557428110?mt=8"><strong>LightBlue</strong> </a>and was able to not only find my little module (named Bob), but it connected, and allowed me to send serial data to Realterm! <strong>Success.</strong></p>

<p>I thought I was on my way to slapping these little HM-10s on a robot, plugging a Bluetooth 4.0 dongle on my PC, sitting back and letting magic happen. That‚Äôs not quite how it worked out. I ordered <a href="http://www.fasttech.com/products/0/10000148/1018901-ultra-mini-bluetooth-csr-40-usb-dongle-adapter"><strong>this</strong> </a>Bluetooth dongle and when it came in quickly discovered that the drivers needed to provide it with magic powers were not available. I tried it all, TI‚Äôs tool pack, random internet drivers, shady internet drivers. It simply wasn‚Äôt going to happen with that dongle.</p>

<p><img src="../images/IMG_0063.png" alt="" />I figured that‚Äôs what you get buying the cheapest dongle you can find. So, I switched over to Newegg and bought <a href="http://www.newegg.com/Product/Product.aspx?Item=N82E16833139027"><strong>this</strong> </a>dongle, making sure it came with supported drivers.</p>

<p>When I got it in, it still didn‚Äôt work (I believe this is completely a software issue, so I expect different outcome if I were to play with these dongles on a Linux machine).</p>

<p>I thought, ‚ÄúWell screw it, I could always make a microcontroller, RS232, and another HM-10 into my own dongle.‚Äù</p>

<p>Um. But I couldn‚Äôt figure out how to get two of the modules to connect. I set them both up on a breadboard, and they both had the little blinking LED (meaning not connected), but the little guys just wouldn‚Äôt get it on.</p>

<p>So, on a whim I emailed Jnhuamoa and asked.</p>

<blockquote>
  <p>Hello,</p>

  <p>I‚Äôm currently working on interfacing two of your HM-10 modules.  I‚Äôm having trouble because there seems to be no pairing command.  I use ‚ÄúAT+VERS?‚Äù and it tells me I‚Äôm using version HMSoft V303.  Is this old firmware?  If it is, is there newer firmware available I could download and write to the cc2540?  I‚Äôve looked through your website and I cannot seem to find any firmware upgrades.  But, I only read English, so I‚Äôm curious if I‚Äôve missed it in translation.</p>

  <p>I appreciate any help you may give,</p>

  <p>‚ÄìThomas Brittain</p>
</blockquote>

<p>To my surprise, they responded</p>

<blockquote>
  <p>Dear sir</p>

  <p>Thanks you for choose our products.</p>

  <p>Between two HM-10 modules, pair and connect process is automic.</p>
</blockquote>

<blockquote>
  <p>You only need to make sure that one of the HM-10 module set to master mode, another is salve mode (use AT+ROLE command), and the TYPE setting of the two modules is the same (use AT+TYPE command) and the PIN number is also same (use AT+PASS command).</p>

  <p>If the master module has connected to other modules, please execute AT+CLEAR command first.</p>

  <p>Our website have module work flow chart, you can have a look.</p>

  <p>:)</p>

  <p>Best regards</p>

  <p>HMSoft</p>

  <p>guocg</p>
</blockquote>

<p>But‚Ä¶now what? I mean, I could wire the guys up to an Arduino-bot but it would be one dongle per robot. What I had wanted was several Bluetooth bots per one dongle.</p>

<p>To be honest, I never expected to use the Bluetooth as a bot tether, I was just looking for an application other than my co-workers ear-phones.</p>

<p>After reading the manual some more, and tinkering with the AT commands, I sent another email over to Guocg.</p>

<blockquote>
  <p>Good sir,</p>

  <p>Thank you for your quick reply.</p>

  <p>I felt stupid after your instructions. I had the HM-10 paired in less than a minute. A very simple process. Thank you.</p>

  <p>But I do have a few others questions.  Is there any way to have more control over the connection process?  I‚Äôd really like to have a micro-controller (PIC, Atmega) in between give the HM-10 very specific commands, which would involve the master connect to several slaves depending on the need of the master.  I can see how the PIN could be changed, but would it be fast enough for one master to manage several slaves in real time?</p>

  <p>This is the process I‚Äôm going to attempt:</p>

  <p>1. Setup 3 slaves with unique PINs</p>

  <p>2. Setup 1 master connected to a microcontroller.</p>

  <p>3. Set master to AT+IMME0 (work when given the command).</p>

  <p>3. The micro-controller will  pull the HM-10 reset line then give the following commands:</p>

  <p>a. AT+CLEAR</p>

  <p>b. AT+PINslave1</p>

  <p>c. AT+WORK</p>

  <p>4. The micro-controller will send a ‚ÄòX‚Äô to slave1</p>

  <p>5. Slave1 will have a micro-controller pulling the reset line every half a second or so, unless, it gets a connection with the ‚ÄòX‚Äô string.</p>

  <p>I‚Äôm not sure of the speed of this process, but I believe it would let me switch between modules remotely.  I have read about some of the older releases of the firmware for the module HM-10.  Is there still no chance in getting those?  I understand now that pairing with the HM-10 modules is very easy, but it also seems very restricted.</p>

  <p>Thanks for all the help,</p>

  <p>‚ÄìThomas</p>
</blockquote>

<p>This time, I think I got a blow-off response. That‚Äôs fair. I‚Äôm a hack not an industrial developer.</p>

<blockquote>
  <p>Dear sir</p>

  <p>You shoule make sure that HM-10 modules AT+TYPE vlaue is 1. PinCode set command is AT+PASS.</p>

  <p>Best regards</p>

  <p>HMSoft</p>

  <p>Guocg</p>
</blockquote>

<p><img src="../images/IMG_9017.jpg" alt="" />So, no chance on getting older firmware. I started preparing to implement my Atmega &amp; HM-10 team. I strung up the HM-10 on the backpack breadboard of Silas‚Äô bot (my son‚Äôs bot).</p>

<p>I was beginning to get really frustrated with the level conversion problem. I had tried the <a href="http://www.fairchildsemi.com/ds/CD/CD4049UBC.pdf"><strong>CD4050</strong></a>, but found it was uni-directional, meaning I still had to have a converter for the Rx bus (HM-10 and Arduino), or, unplug the HM-10 from the Rx bus every time I wanted to upload a sketch to the Arduino. In the end, I started doing that and used a voltage divider for the Tx line.</p>

<p>That‚Äôs when I ran into another problem: <strong>Range</strong>.</p>

<p>More specifically, the lack of range. The little modules would lose connection if more than 7 inches away. <strong>Ugh.</strong></p>

<p>Back to trouble-shooting. I couldn‚Äôt really pin-point the problem. I did find the modules had a power setting (AT+POWEx, X=0-4). But no matter what setting I put the modules on, they didn‚Äôt have range greater than 7 inches. But I did notice when I was moving the slave around I could get a connection by aiming the master towards the slave. But if I rotated the module, it would lose connection. I didn‚Äôt want to do it, but I started reading about telemetry.</p>

<p>I can‚Äôt say I learned anything, though, I did develop a theory. The ground planes I put on my breakout board were screwing with the telemetry.</p>

<p>A second time I breakout the heat-gun and pull the HM-10s off their breakout boards. I get back in Eagle and re-design the breakout to remove the ground planes underneath</p>

<p><strong><a href="http://www.ubermentis.com/files/BLE_v9_3.rar">HM-10 Breakout v9.3</a> (untested)</strong></p>

<p>I thought as long as I was going to have the boards printed again, I‚Äôd go ahead and add some sort of level conversion.  I reviewed a few different SMD chips (CD4050, 74LVC245, TXB0108, etc.) but I found the chip was either uni-directional or overpriced.  In the end, I decided on the same <a href="http://www.adafruit.com/datasheets/AN10441.pdf">design</a> as <a href="http://www.adafruit.com/products/757#Downloads">Ada‚Äôs</a> and <a href="https://www.sparkfun.com/products/8745">Spark‚Äôs</a> 4-channel I2C converters.</p>

<p>This design was cheap, scalable, and required little layout room.  It was fairly simple, voltage divider from high-to-low, and a tricky little N-Channel MOSFET on the low-to-high.  The low-to-high circuit is actually bi-directional (up to a certain speed) but I‚Äôm simply using it to raise Tx voltage from the HM-10 to the Arduino, while protecting the HM-10 from uploading a sketch.</p>

<p>**<img src="../images/Logic_Converter_Schem.jpg" alt="" />
**</p>

<p>And, that‚Äôs it so far‚Ä¶sorry.</p>

<p>I‚Äôve already got my <a href="http://www.ebay.com/itm/261117507960?ssPageName=STRK:MEWNX:IT&amp;_trksid=p3984.m1439.l2649">BSS138s</a> and I should get the new boards Monday.</p>

<p><strong>The LED and Heatsink</strong></p>

<p><img src="../images/IMG_0589.jpg" alt="" />A bit ago I realized I needed to start documenting better and figured a picture was worth a thousand words, so at a 32fps x 1,000, well, in short video documentation should kick-ass (I submit for further evidence <a href="http://www.youtube.com/user/chickenparmi">chickenparmi</a>‚Äôs works :).  Well, I got to trying to figure out how I was going to make these videos.  That‚Äôs when I came up with the idea of a piece of wood hanging from the ceiling‚Äìfeel free to copy this design, it is open-design.</p>

<p><img src="../images/IMG_8868_513x768.jpg" alt="" /></p>

<p>Well, I attached a board with a hole on it so my iPhone could lie there and take videos of whatever my hands were doing.  But I noticed there simply wasn‚Äôt enough light in the hacking hours (after the wife‚Äôs asleep) to do a proper video.  That‚Äôs when I began looking into cheap high-powered LEDs.  They aren‚Äôt too difficult to work with, the items I ended up needing were.</p>

<ul>
  <li><a href="http://www.ebay.com/itm/12V-Regulated-Switching-Power-Supply-2-95A-35W-AC-DC-PSU-/111117029499?pt=US_Radio_Comm_Device_Power_Supplies&amp;hash=item19df17507b">PSU</a> ~$6</li>
  <li><a href="http://www.ebay.com/itm/110943602647?ru=http%3A%2F%2Fwww.ebay.com%2Fsch%2Fi.html%3F_from%3DR40%26_sacat%3D0%26_nkw%3D110943602647%26_rdc%3D1">LED</a> $4.15</li>
  <li><a href="http://www.fasttech.com/products/1049304">Heatsink Paste</a> $6.15 (though, reviews say <a href="http://www.fasttech.com/p/1391700">this</a> is better)</li>
  <li><a href="http://www.fasttech.com/p/1173705">Heatsink</a> $5.48</li>
</ul>

<p><strong>Total ~ $21.48</strong></p>

<p>This may seem high, but the heatsink paste was used for many other things; I made 3 other LED track lights, and other LED lighting projectss with it, and I‚Äôve <em>maybe</em> used 5% of the tube.  And the PSU has doubled as a work-bench power supply :)</p>

<p>As many other projectss, this one isn‚Äôt done.  The original plan was to add an array of light-sensors to adjust the light as move my hands around, thereby auto-correcting for light imbalances in the videos.  That part isn‚Äôt done.</p>

<p>But I jump ahead.  When I first started this little projects I had no idea how to work with high-power LEDs.  My little ignorant self assumed they were like 20ma LEDs‚Äìright?  Well, I quickly figured out that heat displacement was the single most important issue. Which is why I ordered a 800 lumen LED 3 weeks before I ordered a heatsink and paste.</p>

<p><img src="../images/IMG_8829_2.jpg" alt="" /></p>

<p>Then, it came to the problem of finding out of my heat sinking was adequate to the massive LED. (I think a 60 watt tungsten produces 800 lume as well?  And I know they can cook little cakes‚Äìwhat? It was my sister‚Äôs <a href="http://www.ebay.com/itm/Working-Vintage-Easy-Bake-Oven-The-Original-27th-Year-Kenner-/330948535794?pt=Pretend_Play_Preschool_US&amp;hash=item4d0e11e5f2">Easy Bake</a>, oven not mine.)  I digress, so being <a href="https://dopasolution.com/dyscalculia/">dyscalculia </a>I was trying to find out if I was heat-sinking proper without delving into higher math.  That‚Äôs when I remembered I had my <a href="http://www.adafruit.com/products/269">thermocoupler</a> together from the coffee roaster I built.  I strung the coupler together with an Arduino and i2c LCD, giving me a pretty accurate and robust temperature sensor.</p>

<p>I looked for a bit, but I couldn‚Äôt find the information on the theremal breakdown on the 800lm LED.  Eventually, I thought I‚Äôd use masking tap to tape the coupler probe against the face of the LED and wire it up (with an <a href="http://led.linear1.org/1led.wiz">appropriate resistor</a>, of course).</p>

<p>The LED was on 1.5 seconds before it blew up to around 180<em>F.  Uh, ya, I broke out the heatsink.  This time, I attached the LED to the heatsink with a bit of thermal paste.  I think attached the two screws, which further pressed the LED against the heatsink.  Then, I put coupler probe against the face of the LED.  I bit off the last of my finger nails and flipped the LED back on.  This time, the temperature sensor went up _much slower_.  And after a few minutes stuck around 112</em>F.  Of course, I didn‚Äôt know if this was beyond the point of thermal breakdown, but I assumed since my own body temperature wasn‚Äôt far off, and I wasn‚Äôt exploding, then it would probably be ok.  I also touched the face of the LED and was able to leave my finger own for longer than 30 seconds.  This I‚Äôve found to be the most empirically reliable test.  With mounting evidence I decided to cut another hole in my board-from-the-ceiling‚Ä¶thing and attach the light.  And there we have it.  I‚Äôll report when I‚Äôve added the light-sensor arrays.</p>

<p><img src="../images/IMG_0593.jpg" alt="" /><img src="../images/IMG_0592.jpg" alt="" /></p>

<p><strong>XL4432 Breakout</strong> ‚Äì <strong>Telemetry is Voodoo</strong></p>

<p><img src="../images/XL4432.jpg" alt="" /></p>

<p>While I was reading about telemetry I discovered <a href="http://www.fasttech.com/p/1214300">these</a> little boards for $3.98 and grew curious if I could do anything with them, other than bricking them.  I was very curious about the claim on range, ‚Äú1000 meters.‚Äù  Even with the BS de-modifier bringing the range down to around 500 meters, that was still something I would love.  So I ordered two and made breakout boards for them.</p>

<p>They came in and right away I had macabre feeling that reminded me of the HM-10 boards.  Well, I‚Äôve not played with them enough to know if I‚Äôve killed them.  I go pissed off with my logic-level converter slipping and feeding the board with 5v (a cheap jumper wire came loose from the breadboard).</p>

<p>I stopped what I was doing and re-made the breakout board to include a <a href="http://www.ti.com/product/txb0108">TXB0108</a> (<a href="http://www.digikey.com/scripts/dksearch/dksus.dll?pv1291=14&amp;FV=1c0002&amp;k=TXB0108&amp;mnonly=0&amp;newproducts=0&amp;ColumnSort=0&amp;page=1&amp;quantity=0&amp;ptm=0&amp;fid=0&amp;pageSize=25">Digi-Key</a>: $2.30).  This is the same little chip that‚Äôs in Ada‚Äôs <a href="http://www.adafruit.com/products/395">8-Channel Bi-directional</a> logic-level shifter.</p>

<p><a href="http://www.ubermentis.com/files/XL4432_Breakout.rar"><strong>XL4432 Breakout</strong></a> Eagle Files <strong>(</strong>**<span style="font-size: 10pt; line-height: 1.231;">not yet tested)**</span></p>

<p><img src="../images/677px-224049mvmueuee2ise9mu3.png" alt="" />That‚Äôs really the whole story here, well, except I‚Äôve been trying to find information on hooking these little guys up with Arduinos for when I do get them wired with a voltage translator.  I‚Äôve found much thus far, but <a href="http://www.electrodragon.com/w/index.php?title=SI4432_433M-Wireless_Transceiver_Module_(1.5KM_Range,_Shield-Protected)">this</a> seems promising.  Sadly, I can‚Äôt figure out how he‚Äôs got the XL4432 wired up by his poorly drawn schematic(?).  Anyone care to give an opinion as to whether those grounds are connected? Logic and CtC both state, ‚ÄúAlways, <em>always</em>, connect all grounds.‚Äù  And if I remember my EE schematic lingo, isn‚Äôt dot on connections most often used when there is an <a href="http://books.google.com/books?id=vJk_d2dxO30C&amp;pg=PA40&amp;lpg=PA40&amp;dq=extraordinary+node&amp;source=bl&amp;ots=4H9vAKxvns&amp;sig=VAb-yba-SUZpoUkeGy9OLhwhgyY&amp;hl=en&amp;sa=X&amp;ei=kibzUZv9FYmK9gSi14CoAg&amp;ved=0CDUQ6AEwAQ#v=onepage&amp;q=extraordinary%20node&amp;f=false">extraordinary node</a>?</p>

<p>Oh well.</p>

<p><strong>Atmega Fuse Doctor &amp; Pogo Board</strong></p>

<p><img src="../images/Board_Layout.jpg" alt="" />I‚Äôm not patient.  At all.  Which lead me to brick a few Atmega boards (<a href="http://letsmakerobots.com/node/36273">1</a>, <a href="http://letsmakerobots.com/node/36763">2</a>).  This upset me, especially since one of those chips was ~$12-17.  I had bricked the chips trying to set their fuses in Atmel Studio.  Due to the price of these chips I feel it was natural for me to begin looking for a solution.  And apparently the <a href="http://mdiy.pl/atmega-fusebit-doctor-hvpp/?lang=en">Fuse Doctor</a> is one such solution.  In essence, it uses the high-voltage programming functions built into Atmel chip.</p>

<p>I thought, ‚ÄúGreat.  A way to save my chips!‚Äù  But‚Ä¶I ran into a problem when I saw the board build, it was an etch a home design.  And I still do not have pant free of ferric chloride stains.  So, I set to re-designing the board into a version I could send off to OSHPark.</p>

<p>I found out the designer had a <a href="http://mdiy.pl/wp-content/uploads/2010/05/shuffle_avrdoc_usb.rar">SMD version</a> of the board ready to go.  But, after looking it over I came to the conclusion it would simply be to expensive to print.  So, I set out to shrink it.</p>

<p><a href="http://www.ubermentis.com/files/Brick_Doc_02.pdf"><strong>Remade SMD schematic</strong></a></p>

<p><img src="../images/IMG_8980.jpg" alt="" /></p>

<p>In the end, I printed a board for around $12.  But like the rest of the items here, it didn‚Äôt work as expected.  The problem had to do with an extra node I missed, which led to a short-circuit around the voltage regulator.  So, I just sliced the trace and was able to at least get pulled up in Atmel Studio and the hex file written to the chip.  So, in theory, if I can correct short-circuit, supply it with 12vs, and connect it to the Atmel chips, I should be able to restore them.</p>

<p><img src="../images/IMG_0054.jpg" alt="" /><strong><a href="http://www.ubermentis.com/files/Atmega_Fuse_Doc_BOM.pdf"></a></strong></p>

<p>You might see in this image where I‚Äôm providing the board with a pre-regulated 5vs through a via.  This was to circumvent the short-circuit around the on-board regulator.  Also, I had to attach my AVR wires on the other side of the 1k resistors to get the board signature read in Atmel studio.</p>

<p>Here‚Äôs the materials: <strong><a href="http://www.ubermentis.com/files/Atmega_Fuse_Doc_BOM.pdf">BOM</a></strong>.</p>

<p>Kariloy‚Äìwho has a complete <a href="http://letsmakerobots.com/node/35100">Fuse Doctor</a> by the way‚Äìreminded me that even if I finished my board, I probably shouldn‚Äôt hook it directly to the bricked board.  Rather, I‚Äôd need to attach to the chip directly.  Of course, in the original fuse doctor, this was done by a DIP socket.  But I don‚Äôt use dips‚Ä¶  So, I began to think I should just give up on the idea.</p>

<p>Then, I remembered <a href="http://en.wikipedia.org/wiki/Pogo_pin">Pogo Pins</a>.  I jumped on eBay to see if I could find any pins with a small enough head to fit against a TFQP lead on chips I used.  These are the <a href="http://www.ebay.com/itm/160926992225?ru=http%3A%2F%2Fwww.ebay.com%2Fsch%2Fi.html%3F_from%3DR40%26_sacat%3D0%26_nkw%3D160926992225%26_rdc%3D1">pins</a> I ended up ordering.</p>

<p><img src="../images/IMG_1655.jpg" alt="OddBot's Drill Press" />When they came in I was pleased to find they would probably be small enough to fit against a single lead without touching its neighbors.  I then started looking for a way to create a jig.  I settled on using HDPE (cutting board) I had left-over.  I figure I could drill holes in it using the <a href="https://www.drillbitcity.com/catalogue/10_piece.asp">bits</a> I had left over from the Hunter S. Thompson board debacle using OddBot‚Äôs old drill-press.</p>

<p>&lt;‚Äî‚Äì OddBot‚Äôs drill press (thank you OddBot ;).</p>

<p>When I got ready to drill the holes, I got into Eagle and printed out the footprint of a 32-TFQP chip.  I cut that out and then cut my HDPE to the same size, making two pieces with enough room for the drill guide in the center.  I then drilled two holes in adjacent corners from the other.  I put a couple of 4-40 screws and nuts to clinch the two pieces of HDPE together.  The idea being, I could spacers between them later and slip the pogo pins through the top, solder the wire on its bottom, then let them rest on the bottom piece of HDPE.  Not sure why I state all that‚Ä¶.the picture I think explains it.</p>

<p><img src="../images/IMG_0642.jpg" alt="" /></p>

<p>After I had the hole thing screwed, tapped, and clinched, I ran out to OddBot‚Äôs drill press, fitted it with the smallest bit I had and tap over one of the pads.  I then pulled out one of the small pins and was surprised to find it fit snuggly.</p>

<p>And that‚Äôs where I stopped, the main reason was not wanting to have to lookup the pinout for the high-voltage serial programming interface on the Atmega-328-P.</p>

<p><strong>Thermostat</strong></p>

<p><img src="../images/IMG_0663.jpg" alt="" />I‚Äôm not going to write this up until I do something different then the guy I stole it has done.</p>

<p>My wife, Bek, asked me awhile back to make her a smart thermostat, which I replied, ‚ÄúI‚Äôm only at the dumb-thermostat skill-level. Will that do?‚Äù  She glared, so I Googled for some planes.</p>

<p>I found this guy‚Äôs <a href="http://www.modsbyus.com/diy-arduino-thermostat/">Arduino thermostat</a> and I realized I had most of the parts already lying about.</p>

<p>‚Äì Arduino Uno</p>

<p>‚Äì I2C Real Time Clock</p>

<p>‚Äì I2C LCD</p>

<p>‚Äì Seeed Relay Shield</p>

<p>‚Äì Dallas 1-wire Temperature (<span style="font-family: Arial; font-size: small; line-height: normal;">DS18B20)</span></p>

<p><img src="../images/IMG_0653.jpg" alt="" /></p>

<p>The idea is pretty simple, the voltage line is tied together on all the legs of the relay shield and the Arduino connects to it.  The Arduino reads the temperature from the sensor, checks the time on the I2C RTC, and prints both to the I2C LCD.  Also, if the time is correct (after 4:00 PM) it will automatically kick on the AC.  I‚Äôve got it all together and working, just not tied to the AC lines. I was trying to find a way to power it, since all the AC lines are 24v and there is no ground.  So, I bought:</p>

<ul>
  <li><a href="https://www.fasttech.com/p/1225702">PSU</a> (for laptop): $10.75</li>
  <li><a href="http://www.ebay.com/itm/Brand-New-3-Prong-Port-Laptop-US-AC-Power-Adapter-Cord-Cable-Hot-Sale-SH/171086070732?_trksid=p2047675.m1850&amp;_trkparms=aid%3D333005%26algo%3DRIC.FIT%26ao%3D1%26asc%3D12%26meid%3D145761556553529940%26pid%3D100011%26prg%3D1005%26rk%3D3%26rkt%3D5%26sd%3D181167704446%26">Cord</a>: $1.65</li>
  <li><a href="https://www.fasttech.com/p/1219200">DC-DC Converter</a>: $1.96</li>
</ul>

<p>Which gives me 15v, 6A unregulated, or 4.5-40v at 1.6a.</p>

<p>Now, looking back, <strong>this projects is more expensive than buying a smart thermostat, and I don‚Äôt recommend it.</strong> The main reason I went with this build was because I owned everything but the temperature sensor and PSU.</p>

<p><strong>Distcc and Gstreamer on Raspberry Pi:</strong></p>

<p>When I began playing with the OpenCV I fell in love. I just felt it has so much to offer us, but I had really kept my tinkering limited to what could be done on the Raspberry Pi. When I finished the little <a href="http://letsmakerobots.com/node/36947"><strong>face tracker</strong></a> on the Pi, I knew it would work well as a sensor, but would not approach the level of function I wanted. In short, the Pi simply could not give me the speed I needed. I pulled up OpenCV on my desktop (I wont go into the specifications, just know it‚Äôs faster than the Pi) and realized pretty quick I‚Äôd need to send the video data from the Pi to the desktop if I was to get the results I wanted.</p>

<p>So, I began playing with cheap ways to send video data to the desktop. I started by attempting to use <a href="http://gstreamer.freedesktop.org/"><strong>Gstreamer</strong></a> to pipe the video data from the Pi, over my WiFi, into OpenCV on the desktop. Twenty hours later‚Ä¶I realized I was too dumb to make this happen. I began reading.</p>

<p>Put simply, there are so many compatibility issues with this process. I still think it is possible, I just got worn out trying to figure it out. And as I understand it, not all of Gstreamer‚Äôs development plugins work on the Pi. Then, it was a question of what was going to capture the video (Motion, FFMPEG, etc), and whether one, if any, of these programs liked to play with OpenCV, not to mention, a video pipe that came from the Raspberry Pi. There is no need to say, but I‚Äôm going to anyways, it was a mess.</p>

<p>I‚Äôve built Gstreamer and FFMPEG on the Pi more times than I can count (not many, I count to like 5). This got me to thinking, ‚ÄúThis would probably go faster if I could compile these beefy programs on the desktop. After doing a bit of digging through cross-compiling literature, I decided on <a href="https://code.google.com/p/distcc/"><strong>Distcc</strong></a>. It seems pretty nifty. It is a genuine remote compiler, meaning there are no SD card swapping and mounting, unmounting. Getting it to run on the Pi was the trick.</p>

<p>I won‚Äôt go through all my wasted time and effort to sort out how to setup Distcc; and, like the other projectss described here, I‚Äôm still not done. Though, this guy‚Äôs <a href="http://jeremy-nicola.info/portfolio-item/cross-compilation-distributed-compilation-for-the-raspberry-pi/"><strong>post</strong></a> has helped me a lot. I‚Äôve learned a lot about Bash scripting and have written a script to setup Distcc, mind you, <strong>this script doesn‚Äôt work yet,</strong> it‚Äôs like the rest of the post, incomplete:</p>

<p>#!/bin/bash</p>

<h1 id="scriptname---description-of-script">scriptname - description of script</h1>

<h1 id="text-color-variables">Text color variables</h1>

<p>txtund=<strong>$(</strong>tput sgr 0 1<strong>)</strong>          # Underline</p>

<p>txtbld=<strong>$(</strong>tput bold<strong>)</strong>             # Bold</p>

<p>bldred=<strong>${</strong>txtbld<strong>}$(</strong>tput setaf 1<strong>)</strong> #  red</p>

<p>bldblu=<strong>${</strong>txtbld<strong>}$(</strong>tput setaf 4<strong>)</strong> #  blue</p>

<p>bldwht=<strong>${</strong>txtbld<strong>}$(</strong>tput setaf 7<strong>)</strong> #  white</p>

<p>txtrst=<strong>$(</strong>tput sgr0<strong>)</strong>             # Reset</p>

<p>info=<strong>${</strong>bldwht<strong>}</strong><strong>*${</strong>txtrst<strong>}</strong>        # Feedback</p>

<p>pass=<strong>${</strong>bldblu<strong>}</strong><strong>*${</strong>txtrst<strong>}</strong></p>

<p>warn=<strong>${</strong>bldred<strong>}</strong><strong>*${</strong>txtrst<strong>}</strong></p>

<p>ques=<strong>${</strong>bldblu<strong>}</strong>?<strong>${</strong>txtrst<strong>}</strong></p>

<p>#Sample</p>

<p>#echo ‚Äú$bldred How are you today? $txtrst‚Äù</p>

<p>sudo apt-get upgrade -y</p>

<p>echo‚Äù$bldred 16% $txtrst‚Äù</p>

<p>sudo apt-get update -y</p>

<p>echo‚Äù$bldred 32% $txtrst‚Äù</p>

<p>wget https://toolbox-of-eric.googlecode.com/files/libiberty.tar.gz</p>

<p>sudo tar -xvf libiberty.tar.gz</p>

<p>cd /home/pi/libiberty</p>

<p>sudo ./configure ‚Äìenable-install-libiberty</p>

<p>sudo make</p>

<p>sudo make install</p>

<p>echo‚Äù$bldred 48% $txtrst‚Äù</p>

<p>cd</p>

<p>cd /home/pi</p>

<p>sudo apt-get install cmake -y</p>

<p>echo‚Äù$bldred 64% $txtrst‚Äù</p>

<p>sudo apt-get install subversion autoconf automake python python-dev -y</p>

<p>echo‚Äù$bldred 80% $txtrst‚Äù</p>

<p>cd</p>

<p>cd /home/pi</p>

<p>pwd</p>

<p>echo # The remote machines that will build things for you. Don‚Äôt put the ip of the Pi unless¬†¬ª.bashrc</p>

<p>echo # you want the Pi to take part to the build process.¬†¬ª.bashrc</p>

<p>echo # The syntax is : ‚ÄúIP_ADDRESS/NUMBER_OF_JOBS IP_ADDRESS/NUMBER_OF_JOBS‚Äù etc‚Ä¶¬†¬ª.bashrc</p>

<p>echo # The documentation states that your should set the number of jobs per machine to¬†¬ª.bashrc</p>

<p>echo # its number of processors. I advise you to set it to twice as much. See why in the test paragraph.¬†¬ª.bashrc</p>

<p>echo # For example:¬†¬ª.bashrc</p>

<p>echo export DISTCC_HOSTS=<span style="background: #fff0f0;">‚Äú192.168.0.102/16‚Äù¬†¬ª.bashrc</span></p>

<p>echo ¬†¬ª.bashrc</p>

<p>echo # When a job fails, distcc backs off the machine that failed for some time.¬†¬ª.bashrc</p>

<p>echo # We want distcc to retry immediately¬†¬ª.bashrc</p>

<p>echo export DISTCC_BACKOFF_PERIOD=0¬†¬ª.bashrc</p>

<p>echo ¬†¬ª.bashrc</p>

<p>echo # Time, in seconds, before distcc throws a DISTCC_IO_TIMEOUT error and tries to build the file¬†¬ª.bashrc</p>

<p>echo # locally ( default hardcoded to 300 in version prior to 3.2 )¬†¬ª.bashrc</p>

<p>echo export DISTCC_IO_TIMEOUT=3000¬†¬ª.bashrc</p>

<p>echo # Don‚Äôt try to build the file locally when a remote job failed¬†¬ª.bashrc</p>

<p>echo export DISTCC_SKIP_LOCAL_RETRY=1¬†¬ª.bashrc</p>

<p>echo ¬†¬ª.bashrc</p>

<p>sudo git clone ‚Äìdepth=1 git://code.opencv.org/opencv.git</p>

<p>cd opencv</p>

<p>sudo mkdir redist &amp;&amp; cd redist</p>

<p>sudo apt-get update -y</p>

<p>sudo apt-get install distcc -y</p>

<p>sudo apt-get update -y</p>

<p>echo‚Äù$bldred 100% $txtrst‚Äù</p>

<p>I‚Äôm embarressed to say how much time I spent fiddling with trying to get Distcc to work properly on the Pi. And so much time wasted was my fault. In the end, it was the <a href="http://distcc.googlecode.com/svn/trunk/doc/web/man/distcc_1.html"><strong>manual</strong> </a>that saved me.</p>

<p>Because I didn‚Äôt really understand the symlink in this scenario I was having a hard time figuring out how Distcc calls the correct compiler. From what I inferred, a symlink was created to replace gcc, c++, cpp, cc, g++. Then, when any of these were called, the symlink would redirect the data to the remote compiler on the desktop. So, when during first go I had at installing Distcc didn‚Äôt work because the $PATH variable was incorrect, I thought, ‚ÄúWell, if it‚Äôs creating a symlink to another compiler, I should just delete the local compilers on the Pi‚Äìthey‚Äôre not needed anyway. That way I‚Äôm sure I‚Äôll get the remote.‚Äù Due to this stinky logic I issued this command</p>

<p><strong>mv local.compilers localcompilers.old</strong></p>

<p>Sadly, it wasn‚Äôt until I read the manual (hey, it‚Äôs a long damn manual) did I discover that a ‚Äúlocal pre-compiler is used before the data is sent to the remote compiler.‚Äù Meaning, every time I disabled the local compiler I done-broke-it.</p>

<p><img src="../images/Distcc_3_2.jpg" alt="" /></p>

<p>If the symlink to Distcc comes up first in the $PATH, it calls it as the pre-compiler, then removes it from the $PATH variable. Distcc then calls the the next compiler in the $PATH variable, this time, to it should be the remote compiler.</p>

<p>Given I removed the local, the first compiler it would find it treated as the precompiler, then removed it, leaving no compiler to do the real compiling.</p>

<p>This caused me to get errors stating there was no compiler found.</p>

<p><img src="../images/Distcc_4_2.jpg" alt="" />I discovered all this waiting on one of my clients to finish a mental-health screening. It definitely confused him when I hit my head against the wall and said, ‚ÄúSon-of-a‚Ä¶‚Äù</p>

<p>I‚Äôd been digging around in the manual on my phone.</p>

<p>To sum up, I know now that both the real compiler and the symlink to distcc must be in the $PATH variable, they just have to be in the correct order.</p>

<p>But as all the tales of woe here, it is unfinished.</p>
:ET