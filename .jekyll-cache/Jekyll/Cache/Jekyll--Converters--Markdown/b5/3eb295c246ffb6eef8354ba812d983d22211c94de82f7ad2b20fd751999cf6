I"ÁQ<p>Originally posted on <a href="www.letsmakerobots.com">www.letsmakerobots.com</a></p>

<p><a class="btn" href="/files/First_Bot.tar.gz" target="">First Bot Files</a></p>

<div class="flex-video">
<iframe width="420" height="315" src="https://www.youtube.com/embed/FmJV9werCjQ" frameborder="0" allowfullscreen=""></iframe>
</div>

<p><strong>I will update with ‚Äú4.x‚Äù build.  But wanted to get video up as demonstration of concept.  SSH‚Äì&gt;RPi‚Äì&gt;I2C Optoisolator‚Äì&gt;Arduino Mini Pro‚Äî&gt;Self Designed Motor shield‚Äì&gt;Tracks :)</strong></p>

<p>This is my first robot.  Of course, he is very modular.  I‚Äôm alright with that‚ÄìI‚Äôm a homeless outreach worker and this entire projects was simply meant to take my mind off the bad stuff for a bit.</p>

<p>I do love this little guy though, his general hodge-podge appearance reminds me of Tank Girl‚Äôs monster‚Äìgood flick.</p>

<p><strong>The Goals:</strong></p>

<p>1. Stay mentally healthy through the Zen of Robotics.</p>

<p>2. Help my two-year-old son overcome his innate fear of robots.</p>

<p>3. To design a platform I could, eventually, use my understanding of psychology and statistics to create nifty behaviors.</p>

<p><strong>The Build v1.x:</strong></p>

<p>In this iteration I have an Interia lab‚Äôs base kit (http://www.robotmarketplace.com/products/IL-ANTKIT2.html).  I wouldn‚Äôt buy the kit again‚Äìthe tread hubs are too blinkin‚Äô flimsy and the treads fall apart pretty quick (although, the grip on those treads are amazing, it felt like the bugger could climb straight up a wall).  Though, the little motors I‚Äôm in love with.  When I build my next bot, I‚Äôll design my own base, but I‚Äôm sure I‚Äôll use these motors (http://www.robotmarketplace.com/products/IL-GMS100.html).  Awesome power in such a little package.</p>

<p>The batteries are left over from an old Cannon camera.  I have them wired in parallel feeding 8.4v and 2900mAh.</p>

<p>Next, I have an Arduino Uno.</p>

<p>Then, I have an Arduino Motor Shield.  I originally was determined to build my own motorshield.  I learned about iron transfers, home PCB etching, Eagle, and different sorts of H-Bridge ICs, all which I‚Äôll write about later, but I came to the conclusion I was being delusional about my current level of ability.  Therefore, I bought a motorshield and proceeded with the build.</p>

<p>http://cthomasbrittain.wordpress.com/2013/01/27/design-a-motor-driver-for-lsn-bot/</p>

<p><img src="../../images/IMG_1035.jpg" alt="" class="ll-image-fl" /></p>

<p>Next, I have a little 5v Linear Regulator (I found out the hard way that if voltage is provided to the Arduino through the vin that apparently a short-circuit is created when you try to draw current from the 5v pin, send it through a sensor, and feed it back into an analog pin. Pfft.  And magic smoke from Arduino number #1.  It was pretty blue.)</p>

<p>An top of that, I have a block of wood, cut with a hack saw from our garage.  Don‚Äôt worry, the garage is still standing: um, so far.  I put a MaxSonar sensor on it (https://www.sparkfun.com/products/639).  I‚Äôve enjoyed this robust sensor; we even survived the short-circuit vin scenario together.</p>

<p>I also have a vibration sensor wired with a 1 meg resistor (https://www.sparkfun.com/products/9196) feeding into analog pin.</p>

<p>And, of course, a feedback LED.</p>

<p><strong>1.x Video</strong></p>

<div class="flex-video">
<iframe width="560" height="315" src="https://www.youtube.com/embed/jElQulP4eYY" frameborder="0" allowfullscreen=""></iframe>
</div>

<p><img src="../../images/IMG_0423.jpg" alt="" class="ll-image-fr" />
<strong>The Build v2.x:</strong></p>

<p>I felt I had finally assembled the ‚Äúkit.‚Äù  But I wanted to own it.  I wanted to get rid of the electrical tape holding the whole thing down.  I made this little mess.  I took some plexi and cut a hole in the middle, then put a slit down some poly-flex tubing and hot glued around the edge as bumper.  I used a medium servo and threaded through the hole for the MaxSonar.  I found some flexible wire that had enough give to keep from the wire breaking down.  Last, hot glue and semi-firm putty held the other bits in place.  I felt like I ‚Äúowned‚Äù it a little more now‚Äìand the whole thing worked pretty great, except how I chose to mount the servo.  The MaxSonar sensor stuck over the edge and would bump into things first.</p>

<p><img src="../../images/IMG_0980.jpg" alt="" class="ll-image-fl" /></p>

<p>Another thing I noticed, the plateform I had created worked nicely as a handle for Silas, my son.  This led him to play with the bot a little more‚Äìeven ‚Äúsaving‚Äù him a few times.</p>

<p><br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br /></p>

<p>2.x Video (Be warned, baby in diaper.)</p>

<div class="flex-video">
<iframe width="560" height="315" src="https://www.youtube.com/embed/XshoH3vyt7g" frameborder="0" allowfullscreen=""></iframe>
</div>

<p><strong>The Build 3.x</strong></p>

<p>I wanted to own more of my build; I procceeded to cut plates using Home Depot grade Plexiglass and long ago I bought a pair of Xbees to be used in a projects. I decided that until I had the kinks worked out in my platform, I would make a simple Xbee controller using Processing 2.0. I removed all the electric tape and pulled out LSN‚Äôs guts.  I cut several Plexiglass plates to act as component holders.</p>

<p><img src="../../images/IMG_1502.jpg" alt="" class="ll-image-fr" /></p>

<p>One plate to cover the base, which I glued two 3 AA battery holders.  I put these in parellel, using 3 LiFePo4 600 mAh batteries.  I ended up with 9.6v at 1200 mAh LiFePo4.  I had found the batteries at Wal-Mart on sale and bought them with the intention of learning how to make my own battery packs.  Unfortantely, it has been more of a challenge than I expected; no easy charger setup, so I found some chips to charge them in series and I bought the chips thinking I could etch a board real easy like and make my own chargable pack.  Well, I didn‚Äôt check what chip I was getting and ended up with a DFN that was approaching singularity in size (http://ww1.microchip.com/downloads/en/AppNotes/01276a.pdf).  I didn‚Äôt give up on a charger board‚Äìbut I knew it was going to take me longer than I wanted (I‚Äôve included my current board verzion, a little more work and I‚Äôll send it off to OshPark).</p>

<p><img src="../../images/IMG_1507.jpg" alt="" class="ll-image-fl" /></p>

<p>Next, I cut a plexiglass template for the Arduino and Motor Shield, lastly, I cut a plexiglass template and cut out where the pins from the an Arduino Wireless Shield could sit down into the Motor Shield. I secured all this down with some 3 inch aluminimum stand offs and some plastic screw knobs (obtained from Alliedelec.com).  I screwed the stand offs into the closure mounting holes.</p>

<p>As I mentioned wanting to earlier, I removed the servo and MaxSensor; in place, I put a breadboard for testing sensors.<br />
<img src="../../images/IMG_1503.jpg" alt="" class="ll-image-fr" /></p>

<p>To power the sensors, I replaced the 5v linear voltage regulator with this neat little DC-DC regulator (LM2596).  The little trim pot lets you set the output 1.5v to 35v, 2A (input is 4.5v-40v).  And it made me happy at $1.56 on eBay.  I also notched out the plexi and put a little two-state switch for turning the bot on and off.</p>

<p>Of course, the sensor I actually worked into the code of this build was simply a HC-SR04 stuck percariously into the breadboard.  (I didn‚Äôt want to pull the MaxSonar out of the rather stable block of wood I had it screwed on.)
<br />
<br />
<br />
<br />
<br /></p>

<p><strong>The Build 4.x</strong></p>

<div class="flex-video">
<iframe width="420" height="315" src="https://www.youtube.com/embed/FmJV9werCjQ" frameborder="0" allowfullscreen=""></iframe>
</div>
<p>.</p>

<p><strong>The Code v1.x:</strong></p>

<p>The basic code tells the little guy to run around shooting his sonar everywhere.  If he detects something closer than 12 inches, he stops, turns to the right, takes a reading, turns to the left, reads, then compares the three readings.  Front, left, and center, whichever is more clear he‚Äôll start going that direction.  He does this ad infinitium‚Äìor ad batterius-lowus. If the little guy miss reads, or the sonar‚Äôs beam wasn‚Äôt wide enough, he‚Äôll run into something and activate the knock sensor.  If this happens, he backs up, does a 180 and starts again.</p>

<p>I did have the foresight to design the code around function calls (e.g., ‚ÄúForward()‚Äù) so that I could eventually give him a big brain using some sort of RF connection (later, I think it will be a PC and Python).</p>

<p><strong>The Code 2.x</strong></p>

<p>This code is pretty close to the original; I added the servo functions and I think a few other minor tweaks (most which I tried to annotate throughout my code).</p>

<p><strong>The Code 3.x</strong></p>

<p>As I mentioned in the build‚ÄìI had bought a pair of Xbees to incorporate into a motioned driven bellydance skirt for my wife.  Fortunately, I found a better way to build it, so I left me with two Xbees Ser1‚Äôs.  After a little meditating, I realized I was finally reaching the point where I could begin to write code on some of processing unit and start doing nifty things with the little guy.  So, I chose to start in Processing, since it was close to the code I was familiar.  After a bit, I had written a rather rough draft of a simple RC controller using a PC, Processing, and the Xbees (Zombie_Processing_3_6_RC.zip).</p>

<p>But, that wasn‚Äôt good enough for me.  I had bought a Raspberry Pi that I desperately wanted to add on to the bot.  I had done the math.  I figured that it was almost as much to setup a RPi with a WiFi dongle as it was to buy a WiFly.</p>

<p>WiFly setup:</p>

<ol>
  <li>WiFly Xbee from SparkFun: $42.95</li>
  <li>Arduino WiFi Shield: $6.98
Total for WiFly: $49.93</li>
</ol>

<p>Basic Raspberry Pi and WiFi Dongle</p>

<p>WiFi Dongle: $6.17
Raspberry Pi: $35.00
SD Card (4g): $2.50
Total for Basic RPi: $43.67</p>

<p>My delusional mind, obviously ahead of my ability, began to run through how this RPi setup would look.  I began to see my little bot as having two separate components to its existence.  The RPi would be the central nervous system and the Arduino would be the peripheral.  The Arduino would be tasked with executing movement and perception functions and the RPi would be tasked with computation and analysis.  So, with my inability to see my inability, towards the end of writing the Processing code to act as controller I realized that it would be a good place to begin testing the peripheral nervous system (Arduino code) of my little bot.  Moreover, that when I did finally reach the point where I was skilled enough to write intelligent code, then that code would replace the my commands sent from Processing.</p>

<p>Of course, a problem hit me upside the head‚Äì‚Äù By default, we‚Äôll be supporting Python as the educational language.‚Äù  F‚Äôing RPi makers.  Oh well‚ÄìI‚Äôd been needing to learn another programming language.  Well, after several days of delving into a scripting language (it was friggin like trying to speak Koin√© of the Late Empire) I finally pieced together working(?) Python code.  The Python code I wanted to act as the equivalent to my Processing code, which to my surprise, it did.  So, I was able to leave my Arduino sketch the very same, i.e., my Python script and Processing code will both work on the same version of Arduino sketch.</p>

<p>I did notice the potential of Python.  I was capable of incorporating threading and Tkinter‚Äôs gui.</p>

<p>I would like to indulge in a caveat.  These codes are in no way complete‚ÄìI‚Äôve simply put my mind towards some mechanical projectss while I wait for the components to come in needed to finish.</p>

<p><strong>The Code 4.x</strong></p>

<p>The code for this version might seem somewhat complicated, but after your under the hood (or bonnet, for my European friends) then it actually is much simpler than my Xbee build.</p>

<p>The information flow can be summed up like so:</p>

<p>SSH ‚Äî&gt; Raspberry Pi ‚Äî&gt; I2C Optoisolator ‚Äì&gt; Arduino Pro Mini ‚Äì&gt; M3 Motor Shield</p>

<p>In essence, it‚Äôs a Raspberry Pi WiFi Dongle.</p>

<p>I designed the flow this way so that I could program higher-level functions (e.g., sensor data computation) on the Raspberry Pi, thereby allowing me to make it autonomous by replacing my keystrokes with its own choices (I hope they‚Äôre good choices).  Of course, this would still allow me to SSH into my Python code on RPi to tweak as I needed.</p>

<p>Therefore, the eventual information flow will be like so:</p>

<p>Raspberry Pi ‚Äî&gt; I2C Optoisolator ‚Äì&gt; Arduino Pro Mini ‚Äì&gt; M3 Motor Shield.</p>

<p>I‚Äôll do my best to out line my code and resources needed to get the code working.</p>

<p>First off, setting up the RPi.</p>

<p><strong>Instead of including in this build, I made a separate walking through.</strong></p>

<p><strong><a href="http://ladvien.github.io/robots/blueberry-pi-robot-base/">Blueberry Pi</a></strong></p>

<p>The code is actually pretty simple right now.  The Python comes up with something to do (right now generated from keystrokes) and tells the Arduino to do it.  It does this by capturing keystrokes, converting them to byes, sending them over the I2C bus where the Arduino captures them, translates them back from bytes into something human readable.  Each keystroke then is associated with a routine.  If it captures the ‚ÄúW‚Äù key code, it turns it into bytes, over I2C, Ardy grabs it, turns it back into a ‚ÄúW,‚Äù then runs the Forward() function.  Likewise, the Arduino can send information back through the bus to the Pi, which the Pi converts from a byte, into character, then compiles the characters into a string until it predefined delimiter.  Simple.</p>

<p>The keystroke will eventually be replaced with Raspberry Pi calculations‚Äìtherefore, it‚Äôs the central nervous system.  The Arduino will be responsible for carrying out functions; in this metaphor, it‚Äôs the autonomous nervous system.  The idea is, even if the Pi goes down, the Ardy will hold on to some basic functionality.  This allows the synergy of high-functions (e.g., speech synthesizing) and system stability (Arduino‚Äôs ‚Äúsurvival code‚Äù).  Of course, it‚Äôs not done yet. :)</p>

<p><strong>Dicussion v1.x:</strong></p>

<p>So, I‚Äôm actually much further with this guy now.  But I felt I should go back and verbally process my build; keeping track of it for my sake, and perhaps any other hack like me unfortunate enough to read this.</p>

<p>Therefore, I‚Äôm going to list the things I‚Äôve learned (those bored are welcome to leave quietly).</p>

<ul>
  <li>The LMR collective is invaluable‚Äì(although, they can be a little Ayn Randish with inepts, **‚ÄúYou didn‚Äôt ‚ÄòGoogle‚Äô that question before posting! Stick-piggie-piggie! Stick!‚Äù  **Especially that Cristal the Carpenter fellow).</li>
  <li>SparkFun is EXPENSIVE.</li>
  <li>Ebay is cheap.</li>
  <li>Magic smoke smells good.</li>
  <li>Designing a circuit is easy; designing a good circuit is esoteric.  Although, I still believe I did the right thing in trying to design my own motor circuit.  I learned so much from digging around in datasheets and online tutorials, although the frustration was high, the knowledge I gained was worth it.</li>
  <li>Etching your own boards is pretty easy.  Trying to etch a board with small traces is a mother-of-some-puppies.</li>
  <li>When making homemade PCBs, get a good soldering iron.  Cheap irons don‚Äôt seem to get hot enough.  What ended up happening to me  was when the tip got a little dirty I‚Äôd go to solder a pin and as I was pulling my iron away the trace would come off the board.  Funny enough, this is most likely to happen on the very last pin you solder.  Not sure why.</li>
  <li>Although I now feel comfortable building my own bot from raw components, I‚Äôm not ashamed I built this iteration from modular components.  It has taught me a lot.</li>
  <li>Electronics fills your mind.  The zen of robots has been excellent for my mental health.</li>
  <li>Being delusional is in a maker‚Äôs best interest.  Dream it, start building, and when the details hit you in the face, hit back with a lot of creativity.  And remember, you always have Grandma Google to explain anything you might need to know.</li>
  <li>RC cars are for jocks; robots are for the awesome.</li>
</ul>

<p><strong>Discussion v2.x</strong></p>

<p>Looking back, I‚Äôm not sure I would have gone with the servo again.  I didn‚Äôt analyze the current it drew, but I‚Äôm pretty sure it wasn‚Äôt that much less than firing the motors and having the entire bot shift.  The treads gripped well, so I don‚Äôt feel like I would have sacrificed any precision.  I would simply have the bot zero-point turn to the right, left, instead of the servo.  Not sure why, my gut was happier with fewer moving parts‚Äìbefore the servo the build had a more solid feel to it.  But, on the plus side, I did learn to use servos through the process.  I also learned the hard way the differences between a degree rotation servo and a full rotation servo.</p>

<p>Lessons learned:</p>

<ul>
  <li>Dremel tools are a necessity for robot building.  Especially cutting bits.</li>
  <li>A table vice is nice. So is a real workbench (even if it came out of a dumpster).</li>
  <li>A full-rotation servo is not precise (I know angular servos are not either, but I‚Äôm not looking for reductio ad absurdum).</li>
  <li>Children think servos are make creepy noises.</li>
  <li>Plexiglass is great for prototyping.  Combined with a dremel, cutting bits, and a speed-square, rapid prototyping has never been so ghettotastic.</li>
</ul>

<p><strong>Discussion 3.x:</strong></p>

<p>I‚Äôm very excited to begin approaching the put where I can put some real brains into the little guy.  Looking back, I will feel a twinge of regret not begining the Xbee controller code in Python rather than writing it in Processing and then re-writing it in Python.  Regardless, it was good practice. Also, I know the kinks I will need to work out for a stable version of this Xbee controller.  Right now, the processing code has little error control‚Äìwhen receiving data, it simply draws it from the Arduino and displays it.  It doesn‚Äôt worry about dropped bits or unusable data.  The Python code has sophisticated error checking on par with an amoebae.  Right now, it simply checks to see if the readline has more than 8 or 9 digits to it.  If it does, it prints the data, if not, it skips and waits for a more complete readline.  These can be improved drastically.  But, it simply isn‚Äôt my intention to do so.  Eventually, I plan to place the Raspberry Pi on top of the Arduino, linked with a USB cable.  So, I‚Äôm really counting on no data lost to the aether.  I wrote these codes simply to see if I could.  Like a caveman grunting his prowess to a robot.</p>

<p><strong>Discussion 4.x</strong></p>

<p>I feel I‚Äôve created probably one of the most complex RC cars on the internet.  And I‚Äôm tired.</p>

<p>Lessons learned:</p>

<ul>
  <li>Raspberry Pi‚Äôs have pull-up resistors on their I2C lines.</li>
  <li>‚ÄúTypical application‚Äù schematics in datasheets are <em>amazing.</em></li>
  <li>Don‚Äôt rely on copying others work.  Create your own, it is much more satisfying.</li>
  <li>Delusions are good.</li>
  <li>I‚Äôm not smart, I‚Äôm obsessive.</li>
  <li>I2C is simpler than serial?</li>
  <li>Those quick2wire guys are full-of-shinobi.</li>
  <li>Designing OSHPark boards has the added benefit of encouraging you to be efficient about PCB design, since you are charged by the square inch.  It pays to learn to design compact boards, with SMD parts.</li>
  <li>It‚Äôs not Python that annoys me, rather, it is the lack of ways to manage Python version compatibility.</li>
</ul>

<p><strong>COGs Breakdown 1.x:</strong></p>

<ul>
  <li>Interia‚Äôs base (4 motors, treads, hubs, and CNC‚Äôed aluminum): $109.00</li>
  <li>Arduino Uno: $34</li>
  <li>Arduino Motor Shield: $28</li>
  <li>Knock Sensor: $2.95</li>
  <li>MaxSonar: $25.95</li>
  <li>Batteries: Already got‚Äôem.  Est. $12.95</li>
  <li>Medium Servo $10.95</li>
  <li><strong>Total: $223.80</strong></li>
</ul>

<p><strong>COGs Breakdown 2.x:</strong></p>

<ul>
  <li>Interia‚Äôs base (4 motors, treads, hubs, and CNC‚Äôed aluminum): $109.00</li>
  <li>Arduino Uno: $34</li>
  <li>Arduino Motor Shield: $28</li>
  <li>Knock Sensor: $2.95</li>
  <li>MaxSonar: $25.95</li>
  <li>Batteries: Already got‚Äôem.  Est. $12.95</li>
  <li>Medium Servo $10.95</li>
  <li>Wireless Shield: $22.95</li>
  <li>Xbee X2: $45.90</li>
  <li>Xbee Explorer: $10.95</li>
  <li>Plexiglas: $12.98</li>
  <li><strong>Total: $316.58</strong></li>
</ul>
:ET