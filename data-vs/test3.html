<!DOCTYPE html>
<meta charset="utf-8">
<style>

</style>


<body>
  <div id="RecallsChart"></div>
  <div id="RecallDetails"></div>
  <div id="chart" style="background:grey"></div>
  <div id="chartContainer">
    <script src="../PapaParse-4.1.2/papaparse.min.js"></script>
    <script src="https://d3js.org/d3.v3.js"></script>
    <script src="http://dimplejs.org/dist/dimple.v2.2.0.min.js"></script>
    <script>
        var svg = dimple.newSvg("#chartContainer", 590, 400);
          var parsed = d3.csv("../data-vs/errors-by-site4.csv", function (data){
              var svg1 = dimple.newSvg("#chart", 600, 400);

              var months = []
              var sites = Object.keys(data[0])
              sites = sites.splice(1, sites.length)

              for(i = 0; i < data.length; i++){
                months.push(data[i].Month)
              }

              var dataErrorsBySite = []
              for(i = 0; i < months.length; i ++){
                var dataForMonth = data[i]

                sites.forEach(function(site){
                  dataErrorsBySite.push({"site":site, "month": months[i], "dataErrors": dataForMonth[site]})
                })
              }

              console.log(dataErrorsBySite)
          })

    </script>
  </div>
</body>
