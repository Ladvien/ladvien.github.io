---
layout: post
title: 1B1 -- Raspberry Pi and NodeJS Bot
categories: Arch Linux
excerpt: A 4-wheel microbot built on a Raspberry Pi Zero W using NodeJS.
tags: [Node, JavaScript, DRV8830, Arch Linux, Raspberry Pi Zero W, linux, i2c]
series: Raspberry Pi
image: 
    feature: arch-pi-splash.png
comments: true
custom_css:
custom_js: 
---


[![](https://ladvien.com/images/1b1_frame.jpg){: .float-left}](https://ladvien.com/raw_images/1b1_frame.jpg) Not too long ago there was a post on Hackaday about a little four-wheeled bot made with a Raspberry Pi and some eBay motor drivers.

[Raspberry Pi Zero Drives Tiny RC Truck](https://hackaday.com/2018/01/24/raspberry-pi-zero-drives-tiny-rc-truck/)

I really liked the little chassis, ordered one, and was happy to find it was delivered with the motors already mounted.  (As I become an aged hacker, it's the little time savers which are genuinely appreciated).

On buying the chassis I'd already decided to use one my Raspberry Pi Zero W's (rp0w) to control the bot.  I really like Arch Linux on the rp0w.  It's light weight enough and the packages are well curated.  Again, it's the little time savers.  I liked the combination even more since I found a way to set the rp0w headlessly, which meant I could go from SD card to SSH'ing into little Linux board.

* [Headless Arch Linux on Raspberry Pi Zero W](https://ladvien.com/installing-arch-linux-raspberry-pi-zero-w/)

Coincidentally, I purchased several DRV8830 modules from eBay.  This is a sad story -- I've played with the DRV8830 chip a long time ago:

* [Kobold](https://ladvien.com/kobold/)

 Because Sparkfun did a great job of documenting the IC and creating an Arduino library to go with it.  Sadly, I was surprised to find Sparkfun and EOL'ed the boards.

* [MiniMoto Boards](https://www.sparkfun.com/products/retired/11890)

Probably because buttholes like me kept buying them off eBay.  I've got some mixed feelings here -- one of them is guilt.

[![](https://ladvien.com/images/1b1_holes_line_up.jpg){: .float-right}](https://ladvien.com/images/1b1_holes_line_up.jpg)
Anyway, I was surprised to find the mounting holes on the DRV8830s matched up to two sets on the little chassis. I decided I'd attempt to use one module to drive two motors, thereby only needing two DRV8830 modules to drive the entire bot.

I'v had some thermal paste lying about for years--it works nicely as an adhesive.  Also, I was hoping to use the chassis to heatsink the motor drivers.
<div style="clear: both;"></div>

[![](https://ladvien.com/images/1b1_thermal_paste.jpg){: .thumbnail}](https://ladvien.com/raw_images/1b1_thermal_paste.jpg)
[![](https://ladvien.com/images/1b1_board_latched_down.jpg){: .thumbnail}](https://ladvien.com/raw_images/1b1_board_latched_down.jpg)
[![](https://ladvien.com/images/1b1_screw_it_down.jpg){: .thumbnail}](https://ladvien.com/raw_images/1b1_screw_it_down.jpg)
[![](https://ladvien.com/images/1b1_boards_latched_down2.jpg){: .thumbnail}](https://ladvien.com/raw_images/1b1_boards_latched_down2.jpg)


<div style="clear: both;"></div>

A bit of a tangent.  At work one of the skills which is useful for our team is being able to work with APIs.  For awhile I've wanted to learn NodeJS, since it seems to be the goto framework for solid back-end business applications.  It doesn't hurt StackOverflow's Developer Survey for the last few years has shown JavaScript is a solid language to stay sharp on.  Specifically, being able to work within the NodeJS framework makes one pretty darn marketable.

* [StackOverflow's 2018 Develop Survey](https://insights.stackoverflow.com/survey/2018)

Ok, for these reasons I decided to build this bot using NodeJS.  I've written a separate article on setting up NodeJS, working with i2c-bus, and porting the DRV8830 Sparkfun library to NodeJS.

* Article to be written

![](https://ladvien.com/images/1b1_test_drv8830.jpg){: .float-left}
It didn't take too much time at all to get the little motor spinning using NodeJS.

{% highlight js %}
'use strict';
var i2c = require('i2c-bus'), i2c1 = i2c.openSync(1);
var sleep = require('sleep');
var drv8830 = require('./drv8830');

const motorAddressOne = 0x61;
const motorAddressTwo = 0x67;

var motor1 = new drv8830(motorAddressOne, i2c1);
var motor2 = new drv8830(motorAddressTwo, i2c1);

motor1.drive(50);
motor2.drive(50)
sleep.msleep(3500);
motor1.drive(-50);
motor2.drive(50);
motor1.stop()
motor2.stop()
{% end highlight %}

![](https://ladvien.com/images/1b1_adding_power.jpg){: .float-right}
![](https://ladvien.com/images/1b1_making_a_interface.jpg){: .float-left}
![](https://ladvien.com/images/1b1_no_strings.jpg){: .float-right}
![](https://ladvien.com/images/1b1_power_and_isolated.jpg){: .float-left}
![](https://ladvien.com/images/1b1_power.jpg){: .float-right}
![](https://ladvien.com/images/1b1_salvaged_load_share.jpg){: .float-left}
![](https://ladvien.com/images/1b1_wiring_the_motors.jpg){: .float-left}
![](https://ladvien.com/images/1b1_wiring_motors_2.jpg){: .float-right}
<div style="clear: both;"></div>
<!-- <div class="flex-video">
<iframe width="184" height="104" src="https://www.youtube.com/embed/PmRkM8vABuI" frameborder="0" allowfullscreen></iframe></div> -->
<!-- 
<a href="http://www.youtube.com/watch?feature=player_embedded&v=PmRkM8vABuI" target="_blank"><img src="http://img.youtube.com/vi/PmRkM8vABuI/0.jpg" alt="IMAGE ALT TEXT HERE" width="240" height="180" border="10"/></a> -->